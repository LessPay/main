function adeDateDummyCtrl(){}function adeTimeDummyCtrl(){}var DateJSLoadCultureInfo=function(a){Date.CultureInfo="en-us"==a.toLowerCase()||"en"==a.toLowerCase()?{name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"}}:{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dd MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dd MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"}}};DateJSLoadCultureInfo(window.navigator.userLanguage||window.navigator.language),Date.CultureInfo&&(Date.CultureInfo.regexPatterns={jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,lastDayOf:/^(last day of)|(last of)/i,firstDayOf:/^(first day of)|(first of)|(1st( day)? of)|first|1st/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence|in)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(t(erday)?)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m((on)?th)?s?/i,day:/^d(ay)?s?/i,year:/^yr(s)?|(y(ear)?s?)/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},Date.CultureInfo.timezones=[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]),function(){var a=Date,b=a.prototype,c=(Date.CultureInfo,function(a,b){return b||(b=2),("000"+a).slice(-1*b)});b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=Date.CultureInfo.dayNames,c=Date.CultureInfo.abbreviatedDayNames,d=Date.CultureInfo.shortestDayNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||c[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.getMonthNumberFromName=function(a){for(var b=Date.CultureInfo.monthNames,c=Date.CultureInfo.abbreviatedMonthNames,d=a.toLowerCase(),e=0;e<b.length;e++)if(b[e].toLowerCase()==d||c[e].toLowerCase()==d)return e;return-1},a.isLeapYear=function(a){return 0===a%4&&0!==a%100||0===a%400},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){for(var b=Date.CultureInfo.timezones,c=0;c<b.length;c++)if(b[c].offset===a)return b[c].name;return null},a.getTimezoneOffset=function(a){for(var b=Date.CultureInfo.timezones,c=0;c<b.length;c++)if(b[c].name===a.toUpperCase())return b[c].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=b.isSameDay=function(a){return this.clone().clearTime().equals((a||new Date).clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+1*a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+1*a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+1*b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var d,e,f;b.getWeek=function(){var a,b,c,g,h,i,j,k,l,m;return d=d?d:this.getFullYear(),e=e?e:this.getMonth()+1,f=f?f:this.getDate(),2>=e?(a=d-1,b=(0|a/4)-(0|a/100)+(0|a/400),c=(0|(a-1)/4)-(0|(a-1)/100)+(0|(a-1)/400),l=b-c,h=0,i=f-1+31*(e-1)):(a=d,b=(0|a/4)-(0|a/100)+(0|a/400),c=(0|(a-1)/4)-(0|(a-1)/100)+(0|(a-1)/400),l=b-c,h=l+1,i=f+(153*(e-3)+2)/5+58+l),j=(a+b)%7,g=(i+j-h)%7,k=0|i+3-g,m=0>k?53-(0|(j-l)/5):k>364+l?1:(0|k/7)+1,d=e=f=null,m},b.getISOWeek=function(){return d=this.getUTCFullYear(),e=this.getUTCMonth()+1,f=this.getUTCDate(),c(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};var g=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0};a.validateMillisecond=function(a){return g(a,0,999,"millisecond")},a.validateSecond=function(a){return g(a,0,59,"second")},a.validateMinute=function(a){return g(a,0,59,"minute")},a.validateHour=function(a){return g(a,0,23,"hour")},a.validateDay=function(b,c,d){return g(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(a){return g(a,0,11,"month")},a.validateYear=function(a){return g(a,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&g(b.week,0,53,"week")&&this.setWeek(b.week),cDate=new Date,void 0==b.year&&(b.month<cDate.getMonth()||b.month==cDate.getMonth()&&b.day<cDate.getDate())&&this.addYears(1),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.toUnixTimestamp=function(){return Math.round(this.getTime()/1e3)},b.getMonthName=function(a){return Date.CultureInfo&&Date.CultureInfo.monthNames&&a>=0&&12>a?Date.CultureInfo.monthNames[a]:""},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var d=Date.CultureInfo.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(d.shortDate);case"D":return b.t(d.longDate);case"F":return b.t(d.fullDateTime);case"m":return b.t(d.monthDay);case"r":return b.t(d.rfc1123);case"s":return b.t(d.sortableDateTime);case"t":return b.t(d.shortTime);case"T":return b.t(d.longTime);case"u":return b.t(d.universalSortableDateTime);case"y":return b.t(d.yearMonth)}}var e=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return c(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return c(b.h());case"H":return b.h();case"mm":return c(b.getMinutes());case"m":return b.getMinutes();case"ss":return c(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return c(b.getFullYear(),4);case"yy":return c(b.getFullYear());case"dddd":return Date.CultureInfo.dayNames[b.getDay()];case"ddd":return Date.CultureInfo.abbreviatedDayNames[b.getDay()];case"dd":return c(b.getDate());case"d":return b.getDate();case"MMMM":return Date.CultureInfo.monthNames[b.getMonth()];case"MMM":return Date.CultureInfo.abbreviatedMonthNames[b.getMonth()];case"MM":return c(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return b.h()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"S":return e(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=(a.CultureInfo,Number.prototype);b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,c._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},c.fromNow=c.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},c.ago=c.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var d,e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),i="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var j=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},k=function(b){return function(){var c=a.today(),d=b-c.getDay();return 0===b&&1===Date.CultureInfo.firstDayOfWeek&&0!==c.getDay()&&(d+=7),c.addDays(d)}},l=0;l<e.length;l++)a[e[l].toUpperCase()]=a[e[l].toUpperCase().substring(0,3)]=l,a[e[l]]=a[e[l].substring(0,3)]=k(l),b[e[l]]=b[e[l].substring(0,3)]=j(l);for(var m=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},n=function(b){return function(){return a.today().set({month:b,day:1})}},o=0;o<f.length;o++)a[f[o].toUpperCase()]=a[f[o].toUpperCase().substring(0,3)]=o,a[f[o]]=a[f[o].substring(0,3)]=n(o),b[f[o]]=b[f[o].substring(0,3)]=m(o);for(var p=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=g.length-1;f>-1;f--){if(d=g[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},q=function(a){return function(){return this._dateElement=a,this}},r=0;r<g.length;r++)d=g[r].toLowerCase(),b[d]=b[d+"s"]=p(g[r]),c[d]=c[d+"s"]=q(d);b._ss=p("Second");for(var s=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},t=0;t<i.length;t++)b[i[t]]=0===t?s(-1):s(t)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date;a.prototype,a.CultureInfo;var b=function(a){for(var c=[],d=0;d<a.length;d++)a[d]instanceof Array?c=c.concat(b(a[d])):a[d]&&c.push(a[d]);return c};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(c){if(c=c instanceof Array?b(c):[c],0===c.length)return null;for(var d=0;d<c.length;d++)"function"==typeof c[d]&&c[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,"lastDayOf"==this.orient){var j=new Date(this.year||e.getFullYear(),this.month+1,0);if(j.getDate())return!this.year&&(j.getMonth()<e.getMonth()||j.getMonth()==e.getMonth()&&j.getDate()<e.getDate())&&j.addYears(1),j}if("firstDayOf"==this.orient){var k=new Date(this.year||e.getFullYear(),this.month,1);if(k.getDate())return!this.year&&(k.getMonth()<e.getMonth()||k.getMonth()==e.getMonth()&&k.getDate()<e.getDate())&&k.addYears(1),k}if(this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var l=Date[this.weekday]();this.day=l.getDate(),this.month||(this.month=l.getMonth()),this.year=l.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=this.value,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var l=Date[this.weekday]();this.day=l.getDate(),l.getMonth()!==e.getMonth()&&(this.month=l.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month||this.value&&(this.operator="add",i=!0),void 0!=this.month&&"week"==this.unit&&(this.value=this.month+1,this[this.unit+"s"]=this.value,this.operator="add",this.month=null,this.day=null,i=!0),"month"==this.unit&&1==this.day&&1==this.value&&(this.operator="add",this.value=this[this.unit+"s"]=this.month+1,this.day=this.month=null,i=!0),i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)}};var c,d=a.Parsing.Operators,e=a.Grammar,f=a.Translator;e.datePartDelimiter=d.rtoken(/^([\s\-\.\,\/\x27]+)/),e.timePartDelimiter=d.stoken(":"),e.whiteSpace=d.rtoken(/^\s*/),e.generalDelimiter=d.rtoken(/^(([\s\,]|at|@|on)+)/);var g={};e.ctoken=function(a){var b=g[a];if(!b){for(var c=Date.CultureInfo.regexPatterns,e=a.split(/\s+/),f=[],h=0;h<e.length;h++)f.push(d.replace(d.rtoken(c[e[h]]),e[h]));b=g[a]=d.any.apply(null,f)}return b},e.ctoken2=function(a){return d.rtoken(Date.CultureInfo.regexPatterns[a])},e.h=d.cache(d.process(d.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),f.hour)),e.hh=d.cache(d.process(d.rtoken(/^(0[0-9]|1[0-2])/),f.hour)),e.H=d.cache(d.process(d.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),f.hour)),e.HH=d.cache(d.process(d.rtoken(/^([0-1][0-9]|2[0-3])/),f.hour)),e.m=d.cache(d.process(d.rtoken(/^([0-5][0-9]|[0-9])/),f.minute)),e.mm=d.cache(d.process(d.rtoken(/^[0-5][0-9]/),f.minute)),e.s=d.cache(d.process(d.rtoken(/^([0-5][0-9]|[0-9])/),f.second)),e.ss=d.cache(d.process(d.rtoken(/^[0-5][0-9]/),f.second)),e.hms=d.cache(d.sequence([e.H,e.m,e.s],e.timePartDelimiter)),e.t=d.cache(d.process(e.ctoken2("shortMeridian"),f.meridian)),e.tt=d.cache(d.process(e.ctoken2("longMeridian"),f.meridian)),e.z=d.cache(d.process(d.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone)),e.zz=d.cache(d.process(d.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone)),e.zzz=d.cache(d.process(e.ctoken2("timezone"),f.timezone)),e.timeSuffix=d.each(d.ignore(e.whiteSpace),d.set([e.tt,e.zzz])),e.time=d.each(d.optional(d.ignore(d.stoken("T"))),e.hms,e.timeSuffix),e.d=d.cache(d.process(d.each(d.rtoken(/^([0-2]\d|3[0-1]|\d)/),d.optional(e.ctoken2("ordinalSuffix"))),f.day)),e.dd=d.cache(d.process(d.each(d.rtoken(/^([0-2]\d|3[0-1])/),d.optional(e.ctoken2("ordinalSuffix"))),f.day)),e.ddd=e.dddd=d.cache(d.process(e.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),e.M=d.cache(d.process(d.rtoken(/^(1[0-2]|0\d|\d)/),f.month)),e.MM=d.cache(d.process(d.rtoken(/^(1[0-2]|0\d)/),f.month)),e.MMM=e.MMMM=d.cache(d.process(e.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),f.month)),e.y=d.cache(d.process(d.rtoken(/^(\d\d?)/),f.year)),e.yy=d.cache(d.process(d.rtoken(/^(\d\d)/),f.year)),e.yyy=d.cache(d.process(d.rtoken(/^(\d\d?\d?\d?)/),f.year)),e.yyyy=d.cache(d.process(d.rtoken(/^(\d\d\d\d)/),f.year)),c=function(){return d.each(d.any.apply(null,arguments),d.not(e.ctoken2("timeContext")))},e.day=c(e.d,e.dd),e.month=c(e.M,e.MMM),e.year=c(e.yyyy,e.yy),e.orientation=d.process(e.ctoken("lastDayOf firstDayOf past future"),function(a){return function(){this.orient=a}}),e.operator=d.process(e.ctoken("add subtract"),function(a){return function(){this.operator=a}}),e.rday=d.process(e.ctoken("yesterday tomorrow today now"),f.rday),e.unit=d.process(e.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),e.value=d.process(d.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),e.expression=d.set([e.rday,e.operator,e.value,e.unit,e.orientation,e.ddd,e.MMM,e.yyyy]),c=function(){return d.set(arguments,e.datePartDelimiter)},e.mdy=c(e.ddd,e.month,e.day,e.year),e.ymd=c(e.ddd,e.year,e.month,e.day),e.dmy=c(e.ddd,e.day,e.month,e.year),e.date=function(a){return(e[Date.CultureInfo.dateElementOrder]||e.mdy).call(this,a)},e.format=d.process(d.many(d.any(d.process(d.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(e[b])return e[b];throw a.Parsing.Exception(b)}),d.process(d.rtoken(/^[^dMyhHmstz]+/),function(a){return d.ignore(d.stoken(a))}))),function(a){return d.process(d.each.apply(null,a),f.finishExact)});var h={},i=function(a){return h[a]=h[a]||e.format(a)[0]};e.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(i(a[c]));return d.any.apply(null,b)}return i(a)},e._formats=e.formats([]),e._start=d.process(d.set([e.date,e.time,e.expression],e.generalDelimiter,e.whiteSpace),f.finish),e.start=function(a){try{var b=e._formats.call({},a);if(0===b[1].length)return b}catch(c){}return e._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}();var parseDateString=function(a,b,c){var d=Date.parse(a);if(null!=d){var e=d.toUnixTimestamp();return c&&(e-=60*d.getTimezoneOffset()),b?d.toString():e}return null},TimeSpan=function(a,b,c,d,e){for(var f="days hours minutes seconds milliseconds".split(/\s+/),g=function(a){return function(){return this[a]}},h=function(a){return function(b){return this[a]=b,this}},i=0;i<f.length;i++){var j=f[i],k=j.slice(0,1).toUpperCase()+j.slice(1);TimeSpan.prototype[j]=0,TimeSpan.prototype["get"+k]=g(j),TimeSpan.prototype["set"+k]=h(j)}if(4==arguments.length)this.setDays(a),this.setHours(b),this.setMinutes(c),this.setSeconds(d);else if(5==arguments.length)this.setDays(a),this.setHours(b),this.setMinutes(c),this.setSeconds(d),this.setMilliseconds(e);else if(1==arguments.length&&"number"==typeof a){var l=0>a?-1:1;this.setMilliseconds(Math.abs(a)),this.setDays(Math.floor(this.getMilliseconds()/864e5)*l),this.setMilliseconds(this.getMilliseconds()%864e5),this.setHours(Math.floor(this.getMilliseconds()/36e5)*l),this.setMilliseconds(this.getMilliseconds()%36e5),this.setMinutes(Math.floor(this.getMilliseconds()/6e4)*l),this.setMilliseconds(this.getMilliseconds()%6e4),this.setSeconds(Math.floor(this.getMilliseconds()/1e3)*l),this.setMilliseconds(this.getMilliseconds()%1e3),this.setMilliseconds(this.getMilliseconds()*l)}return this.getTotalMilliseconds=function(){return 864e5*this.getDays()+36e5*this.getHours()+6e4*this.getMinutes()+1e3*this.getSeconds()},this.compareTo=function(a){var b,c=new Date(1970,1,1,this.getHours(),this.getMinutes(),this.getSeconds());return b=null===a?new Date(1970,1,1,0,0,0):new Date(1970,1,1,a.getHours(),a.getMinutes(),a.getSeconds()),b>c?-1:c>b?1:0},this.equals=function(a){return 0===this.compareTo(a)},this.add=function(a){return null===a?this:this.addSeconds(a.getTotalMilliseconds()/1e3)},this.subtract=function(a){return null===a?this:this.addSeconds(-a.getTotalMilliseconds()/1e3)},this.addDays=function(a){return new TimeSpan(this.getTotalMilliseconds()+864e5*a)},this.addHours=function(a){return new TimeSpan(this.getTotalMilliseconds()+36e5*a)},this.addMinutes=function(a){return new TimeSpan(this.getTotalMilliseconds()+6e4*a)},this.addSeconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+1e3*a)},this.addMilliseconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+a)},this.get12HourHour=function(){return this.getHours()>12?this.getHours()-12:0===this.getHours()?12:this.getHours()},this.getDesignator=function(){return this.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator
},this.toString=function(a){this._toString=function(){return null!==this.getDays()&&this.getDays()>0?this.getDays()+"."+this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds()):this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())},this.p=function(a){return a.toString().length<2?"0"+a:a};var b=this;return a?a.replace(/dd?|HH?|hh?|mm?|ss?|tt?/g,function(a){switch(a){case"d":return b.getDays();case"dd":return b.p(b.getDays());case"H":return b.getHours();case"HH":return b.p(b.getHours());case"h":return b.get12HourHour();case"hh":return b.p(b.get12HourHour());case"m":return b.getMinutes();case"mm":return b.p(b.getMinutes());case"s":return b.getSeconds();case"ss":return b.p(b.getSeconds());case"t":return(b.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return b.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()},this};Date.prototype.getTimeOfDay=function(){return new TimeSpan(0,this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};var TimePeriod=function(a,b,c,d,e,f,g){for(var h="years months days hours minutes seconds milliseconds".split(/\s+/),i=function(a){return function(){return this[a]}},j=function(a){return function(b){return this[a]=b,this}},k=0;k<h.length;k++){var l=h[k],m=l.slice(0,1).toUpperCase()+l.slice(1);TimePeriod.prototype[l]=0,TimePeriod.prototype["get"+m]=i(l),TimePeriod.prototype["set"+m]=j(l)}if(7==arguments.length)this.years=a,this.months=b,this.setDays(c),this.setHours(d),this.setMinutes(e),this.setSeconds(f),this.setMilliseconds(g);else if(2==arguments.length&&arguments[0]instanceof Date&&arguments[1]instanceof Date){var n=a.clone(),o=b.clone(),p=n.clone(),q=n>o?-1:1;if(this.years=o.getFullYear()-n.getFullYear(),p.addYears(this.years),1==q?p>o&&0!==this.years&&this.years--:o>p&&0!==this.years&&this.years++,n.addYears(this.years),1==q)for(;o>n&&n.clone().addDays(Date.getDaysInMonth(n.getYear(),n.getMonth()))<o;)n.addMonths(1),this.months++;else for(;n>o&&n.clone().addDays(-n.getDaysInMonth())>o;)n.addMonths(-1),this.months--;var r=o-n;if(0!==r){var s=new TimeSpan(r);this.setDays(s.getDays()),this.setHours(s.getHours()),this.setMinutes(s.getMinutes()),this.setSeconds(s.getSeconds()),this.setMilliseconds(s.getMilliseconds())}}return this};angular.module("ADE",[]).factory("ADE",["$rootScope",function(a){function b(a){var b=a?a.next("."+j):angular.element("."+j);b.length&&b.hasClass("open")&&b.removeClass("open").remove()}function c(b){angular.isObject(b)&&(b=b.id),b&&a.$broadcast("ADE-start",b)}function d(b,c,d,e){angular.isObject(b)&&(b=b.id),b&&setTimeout(function(){a.$apply(function(){a.$broadcast("ADE-finish",{id:b,oldVal:c,newVal:d,exit:e})})})}function e(a,b,c){a.on("blur.ADE",function(){c.$apply(function(){b(0)})})}function f(a){a&&a.off("blur.ADE")}function g(a,b,c,d){l=!0,a.on("keydown.ADE",function(a){if(9==a.keyCode){a.preventDefault(),a.stopPropagation();var e=a.shiftKey?-1:1;d.$apply(function(){b(e)})}else if(27==a.keyCode)a.preventDefault(),a.stopPropagation(),d.$apply(function(){b(3)});else if(13==a.keyCode&&c!==!0){a.preventDefault(),a.stopPropagation();var e=a.shiftKey?-2:2;d.$apply(function(){b(e)})}})}function h(a){a&&(a.off("keydown.ADE"),a.off("keypress.ADE"))}var i="btn btn-mini btn-primary",j="ade-popup",k=["heart","film","music","camera","shopping-cart","flag","picture","gift","calendar","time","thumbs-up","thumbs-down","hand-right","hand-left","info-sign","question-sign","exclamation-sign","trophy","pushpin","warning-sign","leaf","tint","coffee","magnet","envelope","inbox","bookmark","file","bell","asterisk","globe","plane","road","lock","book","wrench","home","briefcase","map-marker","eye-open","medkit","lightbulb","food","laptop","circle","money","bullhorn","legal","facebook","twitter"],l=!1;return{hidePopup:b,begin:c,done:d,setupBlur:e,teardownBlur:f,setupKeys:g,teardownKeys:h,icons:k,popupClass:j,miniBtnClasses:i}}]),angular.module("ADE").directive("adeNumber",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeNumber:"@",adeId:"@",adeClass:"@",adeReadonly:"@",adePrecision:"=",ngModel:"="},link:function(d,e){var f=!1,g=null,h=0,i=!1,j="",k=2;void 0!==d.adeClass&&(j=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(i=!0),void 0!==d.adePrecision&&(k=parseInt(d.adePrecision));var l=function(){var a="",b=d.ngModel;if(void 0!==b)switch(d.adeNumber){case"money":a=c("money")(b);break;case"percent":a=c("percent")(b);break;case"decimal":a=c("decimal")(b,k);break;case"integer":default:a=c("integer")(b)}e.html(a)},m=function(b){var c=d.ngModel;if(h=b,3!=b){var i=g.val();i=i.replace(/[^0-9.-]/g,""),i=parseFloat(i),isNaN(i)&&(i=""),d.ngModel=i}e.show(),g&&(g.off(),g.remove()),f=!1,a.done(d.adeId,c,d.ngModel,h)},n=function(){f||(f=!0,h=0,a.begin(d.adeId),value=d.ngModel,angular.isArray(value)&&value.length>0&&(value=value[0]),angular.isString(value)?value=parseFloat(value.replace(/[$]/g,"")):angular.isNumber(value)||(value=""),value=value?value:"",e.hide(),b('<input type="text" class="'+j+'" value="'+value+'" />')(d).insertAfter(e),g=e.next("input"),g.focus(),a.setupBlur(g,m,d),a.setupKeys(g,m,!1,d),g.on("keypress.ADE",function(a){var b=a.keyCode?a.keyCode:a.which;b>=48&&57>=b||36==b||37==b||44==b||45==b||46==b||9==b||27==b||13==b||(a.preventDefault(),a.stopPropagation())}))};i||e.on("click.ADE",function(a){d.$apply(function(){n(a)})}),d.$on("$destroy",function(){e&&(e.off("click.ADE"),g&&g.off("keypress.ADE"))}),d.$watch(function(a){return a.ngModel},function(){l()})}}}]),angular.module("ADE").directive("adeUrl",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeUrl:"@",adeId:"@",adeClass:"@",adeReadonly:"@",ngModel:"="},link:function(d,e){var f=!1,g=null,h=null,i=0,j=null,k=!1,l="";void 0!==d.adeClass&&(l=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(k=!0);var m=function(){var a="",b=d.ngModel;if(void 0!==b)switch(angular.isArray(b)&&(b=b[0]),angular.isString(b)||(b=b.toString()),d.adeUrl){case"email":a=c("email")(b);break;case"phone":a=c("phone")(b);break;case"url":default:a=c("url")(b)}e.html(a)},n=function(b){var c=d.ngModel;i=b,3!==i&&g&&(d.ngModel=g.val()),e.show(),a.hidePopup(e),g&&g.remove(),f=!1,a.done(d.adeId,c,d.ngModel,i),a.teardownBlur(g),a.teardownKeys(g),h&&(h.off("blur.ADE"),a.teardownKeys(h))},o=function(){j&&window.clearTimeout(j),f=!0,i=0,a.begin(d.adeId),angular.isString(d.ngModel)||(d.ngModel=d.ngModel?d.ngModel.toString():""),e.hide(),a.hidePopup(e),b('<input type="text" class="'+l+'" value="'+d.ngModel.replace(/"/g,"&quot;")+'" />')(d).insertAfter(e),g=e.next("input"),g.focus(),a.setupBlur(g,n,d),a.setupKeys(g,n,!1,d)},p=function(g){if(f)return g.preventDefault(),g.stopPropagation(),void 0;var i=d.ngModel?d.ngModel.toString():"",l=!1,m=$(window).scrollTop(),p=$(window).scrollLeft(),q=e.offset(),r=q.left-p,s=q.top+e[0].offsetHeight-m,t="";switch(d.adeUrl){case"email":l=c("email")(d.ngModel).match("mailto:"),i.match("mailto:")||(i="mailto:"+i),t='<div class="'+a.popupClass+' ade-links dropdown-menu open" style="left:'+r+"px;top:"+s+'px">'+'<a class="'+a.miniBtnClasses+'" href="'+i+'" ng-click="ADE.hidePopup();">Send Email</a>'+' or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>";break;case"phone":l=c("phone")(d.ngModel).match("tel:"),i.match("tel:")||(i="tel:"+i),t='<div class="'+a.popupClass+' ade-links dropdown-menu open" style="left:'+r+"px;top:"+s+'px">'+'<a class="'+a.miniBtnClasses+'" href="'+i+'" ng-click="ADE.hidePopup();">Call Number</a>'+' or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>";break;case"url":default:l=c("url")(d.ngModel).match(/https?:/),i.match(/https?:/)||(i="http://"+i),t='<div class="'+a.popupClass+' ade-links dropdown-menu open" style="left:'+r+"px;top:"+s+'px">'+'<a class="'+a.miniBtnClasses+'" href="'+i+'" target="_blank" ng-click="ADE.hidePopup();">Follow Link</a>'+' or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>"}if(""!==d.ngModel&&l&&!k){if(g.preventDefault(),g.stopPropagation(),!e.next("."+a.popupClass).length){b(t)(d).insertAfter(e);var u=e.next(".ade-links").find(".ade-edit-link");u.on("click.ADE",o),h=e.next(".ade-links").find(".invisinput"),h.focus(),a.setupKeys(h,n,!1,d),h.on("blur.ADE",function(){a.teardownKeys(h),h.off("blur.ADE"),h=null,j=window.setTimeout(function(){u&&u.off("click.ADE"),a.hidePopup(e)},300)})}}else k||(g.preventDefault(),g.stopPropagation(),o())};k||e.on("click.ADE",function(a){d.$apply(function(){p(a)})}),d.$on("$destroy",function(){if(e){e.off("click.ADE");var a=e.next(".ade-links").find(".ade-edit-link");a&&a.off("click.ADE"),h&&h.off("blur.ADE")}}),d.$watch(function(a){return a.ngModel},function(){m()})}}}]),angular.module("ADE").filter("validDate",["$filter",function(a){return function(b,c){if(angular.isUndefined(b))return"";if(angular.isString(b)){var d=b.split(",");3==d.length&&(b=d)}var e=b,f=b,g="";angular.isArray(b)&&(e=parseInt(b[0]),f=parseInt(b[1]),g=parseInt(b[2]),f||(f=e),e||(e=f));var h=c,i=!0,j=!1;if(angular.isArray(c)&&(h=c[0],void 0!==c[1]&&(i=c[1]),void 0!==c[2]&&(j=c[2])),!b||!e)return"";if(angular.isString(e)){var k=parseInt(e);e===k+""?e=k:(e=parseDateString(e),f=e)}var l="";if(i){var m=new Date(1e3*f).getTimezoneOffset();if(f+=60*m,l=a("date")(1e3*f,h),j&&m!==g){var n=(m-g)/60;n>0&&(n="+"+n),l+=" ("+n+" h)"}}else l=a("date")(1e3*e,h);return l}}]),angular.module("ADE").directive("adeCalpop",["$filter",function(a){return{require:"?ngModel",restrict:"A",scope:{adeCalpop:"@",adeYearonly:"@",ngModel:"="},link:function(b,c){var d={format:"mm/dd/yyyy"};void 0!==b.adeCalpop&&(d.format=b.adeCalpop),void 0!==b.adeYearonly&&"1"==b.adeYearonly&&(d.viewMode=2,d.minViewMode=2);var e=function(e){var f="";e&&e.date&&void 0==e.external&&e.wasClick?(f=a("date")(e.date,d.format),b.ngModel=f):e.external&&e.date?(f=angular.isNumber(e.date)?a("date")(e.date,d.format):e.date,c.datepicker("setValue",f)):e.external&&c.datepicker("setValue",null)};c.datepicker(d).on("changeDate.ADE",function(a){setTimeout(function(){b.$apply(function(){e(a)})})}),b.ngModel&&c.datepicker("setValue",b.ngModel),c.on("keypress.ADE",function(a){var b=a.keyCode?a.keyCode:a.which;13==b?(a.preventDefault(),a.stopPropagation(),c.datepicker("hide"),c.blur()):27==b&&c.datepicker("hide")}),b.$on("$destroy",function(){c&&(c.off("keypress.ADE"),c.off("changeDate.ADE"),c.datepicker&&(c.datepicker("hide"),c.datepicker("remove")))}),b.$watch(function(a){return a.ngModel},function(){e({date:b.ngModel,external:!0})})}}}]),angular.module("ADE").directive("adeDate",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeDate:"@",adeId:"@",adeClass:"@",adeReadonly:"@",adeAbsolute:"@",adeTimezone:"@",ngModel:"="},link:function(d,e){var f=!1,g=null,h=0,i=!1,j="",k="mm/dd/yyyy",l=!1,m=!1,n="";void 0!==d.adeDate&&(k=d.adeDate),void 0!==d.adeClass&&(j=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(i=!0),void 0!==d.adeAbsolute&&"1"==d.adeAbsolute&&(l=!0),void 0!==d.adeTimezone&&"1"==d.adeTimezone&&(m=!0);var o=function(){n=c("validDate")(d.ngModel,[k,l,m]),e.html(n)},p=function(b){var c=d.ngModel;if(h=b,3!=b){if(value=parseDateString(g.val()),null==value||0==value)value=[0,0,0];else{var i=new Date(1e3*value).getTimezoneOffset();value=[value,value-60*i,i]}d.ngModel=value}e.show(),a.teardownBlur(g),a.teardownKeys(g),g.datepicker("remove"),g.scope().$destroy(),g.remove(),f=!1,a.done(d.adeId,c,d.ngModel,h)},q=function(){if(a.hidePopup(e),!f){f=!0,h=0;var c=d.ngModel;if(angular.isArray(d.ngModel)&&d.ngModel.length>0&&(c=d.ngModel[0],d.adeAbsolute&&void 0!==d.ngModel[1]&&(c=d.ngModel[1],c&&(c+=60*new Date(1e3*c).getTimezoneOffset()))),angular.isString(c)){var i=parseInt(c.replace(/[$]/g,""));c=c===i+""?i:parseDateString(c)}else angular.isNumber(c)||(c=0);c=c?c:0,a.begin(d.adeId),e.hide();var l="";"yyyy"==k&&(l='ade-yearonly="1"');var m='<input ng-controller="adeDateDummyCtrl" ade-calpop="'+k+'" '+l+' ng-model="adePickDate" ng-init="adePickDate=\''+n+'\'" type="text" class="'+j+'" />';b(m)(d).insertAfter(e),g=e.next("input"),g.focus(),setTimeout(function(){g.focus()}),a.setupBlur(g,p,d),a.setupKeys(g,p,!1,d)}};e.on("mouseover.ADE",function(){var c=e.text();if(!(""===c||c.length<=4)){var f=c.indexOf("(");f>0&&(c=c.substring(0,f));var g=$(window).scrollTop(),h=$(window).scrollLeft(),i=e.offset(),j=i.left-h,k=i.top+e[0].offsetHeight-g,l=Date.today(),m=Date.parse(c),n=m.toString("dddd"),o=l.isAfter(m)?!1:!0,p=Math.abs(new TimeSpan(m-l).days),q=1===p?" day":" days",r=o?"In "+p+q+". ":p+q+" ago. ";0===p&&(r="Today is ");var s='<div class="'+a.popupClass+' ade-date-popup dropdown-menu open" style="left:'+j+"px;top:"+k+'px"><p>'+r+n+".</p></div>";b(s)(d).insertAfter(e)}}),e.on("mouseout.ADE",function(){a.hidePopup(e)}),i||e.on("click.ADE",q),d.$on("$destroy",function(){e&&(e.off("mouseover.ADE"),e.off("mouseout.ADE"),e.off("click.ADE"))}),d.$watch(function(a){return a.ngModel},function(){o()})}}}]),!function(a){var b=function(b,d){if(this.element=a(b),this.picker=a(c.template).appendTo("body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:a.proxy(this.show,this),blur:a.proxy(this.hide,this),keyup:a.proxy(this.update,this)}):this.component?this.component.on("click",a.proxy(this.show,this)):this.element.on("click",a.proxy(this.show,this)),this.minViewMode=d.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=d.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=d.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=d.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};b.prototype={constructor:b,show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isInput||a(document).on("mousedown",a.proxy(this.hide,this)),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.wasClick=!1,this.set(),this.element.trigger({type:"hide",date:this.date})},remove:function(){this.picker.remove()},set:function(){this.element.trigger({type:"changeDate",date:this.date?this.date.getTime():null,wasClick:this.wasClick})},setValue:function(a){this.wasClick=!1;var b=this.date;this.date=a?"string"==typeof a?c.parseDate(a):new Date(1e3*a):null,b&&this.date&&b.getTime()==this.date.getTime()||this.set(),this.viewDate=a&&this.date?new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0):new Date,this.fill()},place:function(){var b=this.component?this.component.offset():this.element.offset();this.picker.css({top:b.top+this.height,left:b.left});var c=a(window).height(),d=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,e=this.picker[0].offsetTop+this.picker[0].offsetHeight;e-d>c?this.picker.css({top:b.top-this.picker[0].offsetHeight-5,left:b.left}).addClass("flipped"):this.picker.removeClass("flipped")},update:function(a){this.date=c.parseDate("string"==typeof a?a:this.isInput?this.element.prop("value"):this.element.data("date")),this.viewDate=this.date?new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0):new Date,this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+c.dates.daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+c.dates.monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),d=a.getMonth(),e=new Date,f=e.getDate(),g=e.getMonth(),h=null;this.date&&(h=new Date(this.date.getFullYear(),this.date.getMonth(),this.date.getDate()).valueOf()),this.picker.find(".datepicker-days th:eq(1)").text(c.dates.months[d]+" "+b);var i=new Date(b,d-1,28,0,0,0,0),j=c.getDaysInMonth(i.getFullYear(),i.getMonth());i.setDate(j),i.setDate(j-(i.getDay()-this.weekStart+7)%7);var k=new Date(i);k.setDate(k.getDate()+42),k=k.valueOf();for(var l,m,n,o=[];i.valueOf()<k;)i.getDay()===this.weekStart&&o.push("<tr>"),l=this.onRender(i),m=i.getFullYear(),n=i.getMonth(),d>n&&m===b||b>m?l+=" old":(n>d&&m===b||m>b)&&(l+=" new"),i.valueOf()===h&&(l+=" active"),i.getMonth()===g&&i.getDate()===f&&(l+=" today"),o.push('<td class="day'+l+'">'+i.getDate()+"</td>"),i.getDay()===this.weekEnd&&o.push("</tr>"),i.setDate(i.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(o.join(""));var p=this.date?this.date.getFullYear():null,q=this.picker.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active");if(p===b){var r=this.date?this.date.getMonth():null;r&&q.eq(r).addClass("active")}o="",b=10*parseInt(b/10,10);var s=this.picker.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;for(var t=-1;11>t;t++)o+='<span class="year'+(-1===t||10===t?" old":"")+(p===b?" active":"")+'">'+b+"</span>",b+=1;s.html(o)},click:function(b){b.stopPropagation(),b.preventDefault();var d=a(b.target).closest("span, td, th");if(1===d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+c.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+c.modes[this.viewMode].navFnc].call(this.viewDate)+c.modes[this.viewMode].navStep*("prev"===d[0].className?-1:1)),this.fill(),this.set()}break;case"span":if(d.is(".month")){var e=d.parent().find("span").index(d);this.viewDate.setMonth(e)}else{var f=parseInt(d.text(),10)||0;this.viewDate.setFullYear(f)}0!==this.viewMode&&(this.date=new Date(this.viewDate)),this.wasClick=!0,this.showMode(-1),this.fill(),this.set();break;case"td":if(d.is(".day")){var g=parseInt(d.text(),10)||1,e=this.viewDate.getMonth();d.is(".old")?e-=1:d.is(".new")&&(e+=1);var f=this.viewDate.getFullYear(),h=this.date;this.date=new Date(f,e,g,0,0,0,0),this.viewDate=new Date(f,e,Math.min(28,g),0,0,0,0),this.wasClick=!0,this.fill(),h&&h.getTime()==this.date.getTime()||this.set()}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+c.modes[this.viewMode].clsName).show()}},a.fn.datepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("datepicker"),g="object"==typeof c&&c;f||e.data("datepicker",f=new b(this,a.extend({},a.fn.datepicker.defaults,g))),"string"==typeof c&&f[c](d)})},a.fn.datepicker.defaults={onRender:function(){return""}},a.fn.datepicker.Constructor=b;var c={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return 0===a%4&&0!==a%100||0===a%400},getDaysInMonth:function(a,b){return[31,c.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||0===c.length)throw new Error("Invalid date format.");return{separator:b,parts:c}},parseDate:function(a){if(!a)return null;var b=new Date,c=parseDateString(a);return c?(b.setTime(1e3*c),b):null},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};c.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+c.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+c.headTemplate+c.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+c.headTemplate+c.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery),angular.module("ADE").filter("decimal",["$filter",function(a){return function(b,c){var d="",c=c||2;return angular.isArray(b)&&(b=b[0]),angular.isString(b)&&(b=parseFloat(b)),angular.isUndefined(b)||!angular.isNumber(b)?d:d=a("number")(b,c)}}]),angular.module("ADE").filter("email",["$filter",function(a){return function(b){return b?(angular.isArray(b)&&(b=b[0]),angular.isString(b)?a("linky")(b):b+""):""}}]),angular.module("ADE").directive("adeIcon",["ADE","$compile","$filter",function(a,b,c){var d=a.icons.length,e="";d>0&&(e='<a class="ade-clear">clear</a>');for(var f=0;d>f;f++)e+='<span class="ade-icon icon-'+a.icons[f]+'"></span>';return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeReadonly:"@",ngModel:"="},link:function(d,f){var g=!1,h=0,i=null,j=null,k=!1;void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(k=!0);var l=function(){var a=c("icon")(d.ngModel);f.html(a)},m=function(b,c){window.clearTimeout(j);var e=d.ngModel,k=c||e;h=b,3!==h&&(d.ngModel=k),g=!1,a.hidePopup(),a.done(d.adeId,e,d.ngModel,h),i&&a.teardownKeys(i),o(),$(document).off("scroll.ADE"),$(document).off("ADE_hidepops.ADE"),1==h?(f.data("dontclick",!0),f.focus()):-1==h&&(f.data("dontclick",!0),f.focus())},n=function(){var a=$("#adeIconBox"),b=$(window).scrollTop(),c=$(window).scrollLeft(),d=f.offset(),e=d.left-7-c,g=d.top+f[0].offsetHeight-b;a.css({left:e,top:g});var h=$(window).height(),i=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,j=a[0].offsetTop+a[0].offsetHeight;j-i>h&&a.css({top:g-a[0].offsetHeight-f.height()-5,left:e}).addClass("flip")},o=function(){var a=f.next(".ade-popup"),b=a.find(".ade-clear"),c=a.find("span");b&&b.off(),c&&c.off()},p=function(c){var h=$("#adeIconBox");h.length&&$(document).trigger("ADE_hidepops.ADE"),f.off("keypress.ADE"),c.preventDefault(),c.stopPropagation(),a.begin(d.adeId);var k=angular.element("."+a.popupClass),l=angular.element(c.target),o=l.attr("class"),p=angular.isDefined(o)&&null!==o.match("icon")&&o.match("icon").length&&l.parent()[0]==f[0],q=l[0]==f[0];if(!(!p&&!q||k&&k.length)){g=!0,b('<div id="adeIconBox" class="'+a.popupClass+' ade-icons dropdown-menu open"><h4>Select an Icon</h4>'+e+'<div class="ade-hidden"><input id="invisicon" type="text" /></div></div>')(d).insertAfter(f),n(),i=angular.element("#invisicon");var r=f.next(".ade-popup"),s=r.find(".ade-clear"),t=r.find("span");s.on("click.ADE",function(){d.$apply(function(){m(0,"ban")})}),angular.forEach(t,function(a){var b=angular.element(a);b.on("click.ADE",function(){window.clearTimeout(j);var a=b.attr("class");if(a.match("ade-icon")){var c=a.split(" "),e=c.pop().substring(5);d.$apply(function(){m(0,e)})}})}),i.focus(),a.setupKeys(i,m,!1,d),i.on("blur.ADE",function(){j=window.setTimeout(function(){d.$apply(function(){m(0)})},500)}),$(document).on("scroll.ADE",function(){d.$apply(function(){m(3)})}),$(document).on("ADE_hidepops.ADE",function(){d.$apply(function(){m(3)})})}},q=function(a){return f.data("dontclick")?(window.setTimeout(function(){f.data("dontclick",!1)},100),f.on("keypress.ADE",function(a){var b=a.keyCode?a.keyCode:a.which;13==b&&(a.preventDefault(),a.stopPropagation(),f.click())}),void 0):(p(a),void 0)};f.on("blur.ADE",function(){f.off("keypress.ADE")}),k||(f.on("click.ADE",function(a){p(a)}),f.on("focus.ADE",function(a){q(a)})),d.$on("$destroy",function(){f&&f.off(),i&&i.off(),o(),$(document).off("scroll.ADE"),$(document).off("ADE_hidepops.ADE")}),d.$watch(function(a){return a.ngModel},function(){l()})}}}]),angular.module("ADE").filter("icon",["ADE",function(a){return function(b){angular.isArray(b)&&(b=b[0]),b||(b="ban-circle");for(var c=!1,d=a.icons.length,e=0;d>e;e++)if(b===a.icons[e]){c=!0;break}return c||(b="ban-circle"),'<span class="ade-icon icon-'+b+'">'}}]),angular.module("ADE").filter("integer",["$filter",function(a){return function(b){var c="";return angular.isArray(b)&&(b=b[0]),angular.isString(b)&&(b=parseFloat(b)),angular.isUndefined(b)||!angular.isNumber(b)?c:c=a("number")(b,0)}}]),angular.module("ADE").directive("adeDuration",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeClass:"@",adeReadonly:"@",ngModel:"="},link:function(d,e){var f=!1,g=null,h=0,i=!1,j="";void 0!==d.adeClass&&(j=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(i=!0);var k=function(){var a="",b=d.ngModel;void 0!==b&&(a=c("duration")(b)),e.html(a)},l=function(b){var c=d.ngModel;h=b,3!=b&&(d.ngModel=g.val()),e.show(),g.remove(),f=!1,a.done(d.adeId,c,d.ngModel,h),a.teardownBlur(g),a.teardownKeys(g)},m=function(){if(!f){f=!0,h=0;var i=c("duration")(d.ngModel);a.begin(d.adeId),e.hide(),b('<input type="text" class="'+j+'" value="'+i+'" />')(d).insertAfter(e),g=e.next("input"),g.focus(),a.setupBlur(g,l,d),a.setupKeys(g,l,!1,d)}};i||e.on("click.ADE",function(a){d.$apply(function(){m(a)})}),d.$on("$destroy",function(){e&&e.off("click.ADE")}),d.$watch(function(a){return a.ngModel},function(){k()})}}}]),angular.module("ADE").filter("duration",function(){function a(a){var b="",c=0,d=0;return 60>a&&a>0?b=1===a?a+"min":a+"mins":a>=60?(d=a%60,c=Math.round((a-d)/60),b=1===c?c+"hr":c+"hrs",d>0&&(b+=1===d?" "+d+"min":" "+d+"mins")):b="",b}function b(a){var b=parseFloat(a,10);return-1!==a.indexOf("h")&&(b=60*b),Math.round(b)}function c(a){var b=a.split(" ");return 60*parseFloat(b[0],10)+parseFloat(b[1],10)}return function(d){if(!d)return"";angular.isArray(d)&&(d=d[0]);var e="";if(!isNaN(d))return a(d);if(!angular.isString(d))return"";d=d.replace(" h","h").replace(" m","m");var f=d.split(" ");switch(f.length){case 1:e=b(d),e=a(e);break;case 2:e=c(d),e=a(e);break;default:e=""}return e}}),angular.module("ADE").directive("adeList",["ADE","$compile","$sanitize",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeList:"@",adeId:"@",adeMultiple:"@",adeReadonly:"@",adeQuery:"&",adeSelection:"&",ngModel:"="},link:function(d,e){var f=!1,g=null,h=0,i=!1,j=!1;void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(j=!0),void 0!==d.adeMultiple&&"1"==d.adeMultiple&&(i=!0),d.query=function(a){d.adeQuery({options:a,listId:d.adeList})},d.selection=function(a,b){d.adeSelection({element:a,callback:b,listId:d.adeList})};var k=function(){var a="";if(void 0!==d.ngModel)if(angular.isString(d.ngModel))a=d.ngModel;else if(angular.isArray(d.ngModel))if(i){var a="";$.each(d.ngModel,function(b,c){a&&(a+=", "),a+=c})}else a=d.ngModel[0];a=c(a).replace(/<[^>]+>/gm,""),e.html(a)},l=function(b){var c=d.ngModel;if(h=b,3!=b){if(value=g.data().select2.data(),angular.isArray(value))if(value.length>0){var i=[];angular.forEach(value,function(a){i.push(a.text)}),value=i}else value="";else value=angular.isObject(value)&&value.text?value.text:value?value.text:"";d.ngModel=value}e.show(),g.select2("destroy"),g.off("cancel.ADE"),g.off("change.ADE"),g.remove(),f=!1,a.done(d.adeId,c,d.ngModel,h)},m=function(){g.select2("destroy"),g.off("cancel.ADE"),g.off("change.ADE"),g.remove(),e.show(),a.done(d.adeId,d.ngModel,d.ngModel,3),f=!1},n=function(a){"singleRemove"===a[0]?l(a.exit):"emptyTabReturn"===a[0]?l(a.exit):"bodyClick"===a[0]?l(0):i||l(a.exit)},o=function(){if(!f){f=!0,h=0,a.begin(d.adeId),e.hide();var c="",j="";i?c='multiple="multiple"':j=",placeholder:'List...'";var k="";d.query&&(k=",query:query");var l="";d.selection&&(l=",initSelection:selection");var o="";d.adeList&&(o=",listId:'"+d.adeList+"'");var p='<input class="ade-list-input" type="hidden" ui-select2="{width:\'resolve\',allowClear:true,openOnEnter:false,searchClear:true,closeOnRemove:false,closeOnSelect:false,allowAddNewValues:true'+k+o+l+j+'}" '+c+" />";b(p)(d).insertAfter(e),g=e.next("input"),angular.isString(d.ngModel)&&(d.ngModel=d.ngModel.split(",")),g.val(d.ngModel),setTimeout(function(){d.selection(g,function(a){g.select2("data",a),g.select2("open")},d.adeList)}),g.on("cancel.ADE",function(a){d.$apply(function(){m(a)})}),g.on("change.ADE",function(a){d.$apply(function(){n(a)})})}};j||e.on("click.ADE",o),d.$on("$destroy",function(){e&&e.off("click.ADE"),g&&(g.off("cancel.ADE"),g.off("change.ADE"))}),d.$watch(function(a){return a.ngModel},function(){k()})}}}]),angular.module("ADE").directive("uiSelect2",["$http",function(){var a={};return{require:"?ngModel",compile:function(b,c){var d,e=b.is("select"),f=void 0!==c.multiple;return function(b,c,g,h){var i=angular.extend({},a,b.$eval(g.uiSelect2));if(f&&(i.multiple=!0),h&&(h.$render=function(){f&&!h.$modelValue?c.select2("data",[]):angular.isObject(h.$modelValue)?c.select2("data",h.$modelValue):c.select2("val",h.$modelValue)},d&&b.$watch(d,function(a){a&&setTimeout(function(){c.select2("val",h.$viewValue),c.trigger("change")})}),!e&&(c.on("change.ADE",function(){h.$setViewValue(c.select2("data")),b.$digest()}),i.initSelection))){var j=i.initSelection;i.initSelection=function(a,b){j(a,function(a){h.$setViewValue(a),b(a)},i.listId)}}b.$on("$destroy",function(){c&&c.off("change.ADE")}),g.$observe("disabled",function(a){c.select2(a&&"disable"||"enable")}),g.ngMultiple&&b.$watch(g.ngMultiple,function(){c.select2(i)}),c.val(b.$eval(g.ngModel)),setTimeout(function(){c.select2(i)})}}}}]),function(a){"undefined"==typeof a.fn.each2&&a.fn.extend({each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){"use strict";function c(a,b){var c,d=0,e=b.length;if("undefined"==typeof a)return-1;if(a.constructor===String){for(;e>d;d+=1)if(0===a.localeCompare(b[d]))return d}else for(;e>d;d+=1)if(c=b[d],c.constructor===String){if(0===c.localeCompare(a))return d}else if(c===a)return d;return-1}function d(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?0===a.localeCompare(c):c.constructor===String?0===c.localeCompare(a):!1}function e(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function f(a){return a.outerWidth()-a.width()}function g(c){var d="keyup-change-value";c.bind("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.bind("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function h(c){c.bind("mousemove",function(c){var d=a.data(document,"select2-lastpos");(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function i(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function j(a){var b,c=!1;return function(){return c===!1&&(b=a(),c=!0),b}}function k(a,b){var d=i(a,function(a){b.trigger("scroll-debounced",a)});b.bind("scroll",function(a){c(a.target,b.get())>=0&&d(a)})}function l(a){a.preventDefault(),a.stopPropagation()
}function m(b){if(!B){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);B=a("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),a("body").append(B)}return B.text(b.val()),B.width()}function n(a,b,c){var d=a.toUpperCase().indexOf(b.toUpperCase()),e=b.length;return 0>d?(c.push(a),void 0):(c.push(a.substring(0,d)),c.push("<span class='select2-match'>"),c.push(a.substring(d,d+e)),c.push("</span>"),c.push(a.substring(d+e,a.length)),void 0)}function o(b){var c,d=0,e=null,f=b.quietMillis||100;return function(g){window.clearTimeout(c),c=window.setTimeout(function(){d+=1;var c=d,f=b.data,h=b.transport||a.ajax,i=b.traditional||!1,j=b.type||"GET";f=f.call(this,g.term,g.page,g.context),null!==e&&e.abort(),e=h.call(null,{url:b.url,dataType:b.dataType,data:f,type:j,traditional:i,success:function(a){if(!(d>c)){var e=b.results(a,g.page);g.callback(e)}}})},f)}}function p(b){var c,d=b,e=function(a){return""+a.text};return a.isArray(d)||(e=d.text,a.isFunction(e)||(c=d.text,e=function(a){return a[c]}),d=d.results),function(b){var c,f=b.term,g={results:[]};return""===f?(b.callback({results:d}),void 0):(c=function(d,g){var h,i;if(d=d[0],d.children){h={};for(i in d)d.hasOwnProperty(i)&&(h[i]=d[i]);h.children=[],a(d.children).each2(function(a,b){c(b,h.children)}),h.children.length&&g.push(h)}else b.matcher(f,e(d))&&g.push(d)},a(d).each2(function(a,b){c(b,g.results)}),b.callback(g),void 0)}}function q(c){return a.isFunction(c)?c:function(d){var e=d.term,f={results:[]};a(c).each(function(){var a=this.text!==b,c=a?this.text:this;(""===e||d.matcher(e,c))&&f.results.push(a?this:{id:this,text:this})}),d.callback(f)}}function r(b){if(a.isFunction(b))return!0;if(!b)return!1;throw new Error("formatterName must be a function or a falsy value")}function s(b){return a.isFunction(b)?b():b}function t(b){var c=0;return a.each(b,function(a,b){b.children?c+=t(b.children):c++}),c}function u(a,c,e,f){var g,h,i,j,k,l=a,m=!1;if(!f.createSearchChoice||!f.tokenSeparators||f.tokenSeparators.length<1)return b;for(;;){for(h=-1,i=0,j=f.tokenSeparators.length;j>i&&(k=f.tokenSeparators[i],h=a.indexOf(k),!(h>=0));i++);if(0>h)break;if(g=a.substring(0,h),a=a.substring(h+k.length),g.length>0&&(g=f.createSearchChoice(g,c),g!==b&&null!==g&&f.id(g)!==b&&null!==f.id(g))){for(m=!1,i=0,j=c.length;j>i;i++)if(d(f.id(g),f.id(c[i]))){m=!0;break}m||e(g)}}return 0!=l.localeCompare(a)?a:void 0}function v(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var w,x,y,z,A,B;w={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case w.LEFT:case w.RIGHT:case w.UP:case w.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case w.SHIFT:case w.CTRL:case w.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},A=function(){var a=1;return function(){return a++}}(),a(document).delegate("body","mousemove",function(b){a.data(document,"select2-lastpos",{x:b.pageX,y:b.pageY})}),a(document).ready(function(){a(document).delegate("body","mousedown touchend",function(c){var d,e=a(c.target).closest("div.select2-container").get(0);if(e)a(document).find("div.select2-container-active").each(function(){this!==e&&(a(this).data("select2").blur(),a(this).data("select2").triggerChange(["bodyClick"]))});else{e=a(c.target).closest("div.select2-drop").get(0),a(document).find("div.select2-drop-active").each(function(){this!==e&&a(this).data("select2").blur()});var f=a(".select2-container");f.length&&a.each(f,function(){a(this).next().hasClass("ade-list-input")&&c.target!==a(this)&&a(this).find(".select2-drop").not(":visible")&&(a(this).data("select2").exit=0,a(this).data("select2").triggerChange(["bodyClick"]))})}e=a(c.target),d=e.attr("for"),"LABEL"===c.target.tagName&&d&&d.length>0&&(e=a("#"+d),e=e.data("select2"),e!==b&&(e.focus(),c.preventDefault()))})}),x=v(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+A()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=j(function(){return c.element.closest("body")}),c.element.attr("class")!==b&&this.container.addClass(c.element.attr("class").replace(/validate\[[\S ]+] ?/,"")),this.container.css(s(c.containerCss)),this.container.addClass(s(c.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(s(c.dropdownCssClass)),this.dropdown.data("select2",this),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),e.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),h(this.results),this.dropdown.delegate(f,"mousemove-filtered",this.bind(this.highlightUnderEvent)),k(80,this.results),this.dropdown.delegate(f,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),l(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),l(a))}),g(e),e.bind("keyup-change",this.bind(this.updateResults)),e.bind("focus",function(){e.addClass("select2-focused")," "===e.val()&&e.val("")}),e.bind("blur",function(){e.removeClass("select2-focused")}),this.dropdown.delegate(f,"mouseup",this.bind(function(b){a(b.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(b),this.selectHighlighted(b)):this.focusSearch(),l(b)})),this.dropdown.bind("click mouseup mousedown",function(a){a.stopPropagation()}),a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(c.element.is(":disabled")||c.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var a=this.opts.element.data("select2");a!==b&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(c){var f,g,h,i;if(f=c.element,"select"===f.get(0).tagName.toLowerCase()&&(this.select=g=c.element),g&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var g,h=this.opts.id,i=this;g=function(d,e,j){var k,l,m,n,o,p,q,r,s;for(k=0,l=d.length;l>k;k+=1)m=d[k],n=h(m)!==b,o=m.children&&m.children.length>0,p=a("<li></li>"),p.addClass("select2-results-dept-"+j),p.addClass("select2-result"),p.addClass(n?"select2-result-selectable":"select2-result-unselectable"),o&&p.addClass("select2-result-with-children"),p.addClass(i.opts.formatResultCssClass(m)),q=a("<div></div>"),q.addClass("select2-result-label"),s=c.formatResult(m,q,f),s!==b&&q.html(i.opts.escapeMarkup(s)),p.append(q),o&&(r=a("<ul></ul>"),r.addClass("select2-result-sub"),g(m.children,r,j+1),p.append(r)),p.data("select2-data",m),e.append(p)},g(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(h=c.id,c.id=function(a){return a[h]}),g?(c.query=this.bind(function(c){var d,e,g,h={results:[],more:!1},i=c.term;g=function(a,b){var d;a.is("option")?c.matcher(i,a.text(),a)&&b.push({id:a.attr("value"),text:a.text(),element:a.get(),css:a.attr("class")}):a.is("optgroup")&&(d={text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")},a.children().each2(function(a,b){g(b,d.children)}),d.children.length>0&&b.push(d))},d=f.children(),this.getPlaceholder()!==b&&d.length>0&&(e=d[0],""===a(e).text()&&(d=d.not(e))),d.each2(function(a,b){g(b,h.results)}),c.callback(h)}),c.id=function(a){return a.id},c.formatResultCssClass=function(a){return a.css}):"query"in c||("ajax"in c?(i=c.element.data("ajax-url"),i&&i.length>0&&(c.ajax.url=i),c.query=o(c.ajax)):"data"in c?c.query=p(c.data):"tags"in c&&(c.query=q(c.tags),c.createSearchChoice=function(a){return{id:a,text:a}},c.initSelection=function(b,f){var g=[];a(e(b.val(),c.separator)).each(function(){var b=this,e=this,f=c.tags;a.isFunction(f)&&(f=f()),a(f).each(function(){return d(this.id,b)?(e=this.text,!1):void 0}),g.push({id:b,text:e})}),f(g)})),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");return c},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val(),exit:this.exit}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var b,c,d,e=this.container.offset(),f=this.container.outerHeight(),g=this.container.outerWidth(),h=this.dropdown.outerHeight(),i=a(window).scrollTop()+document.documentElement.clientHeight,j=e.top+f,k=e.left,l=i>=j+h,m=e.top-h>=this.body().scrollTop(),n=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(b=this.body().offset(),j-=b.top,k-=b.left),n?(c=!0,!m&&l&&(c=!1)):(c=!1,!l&&m&&(c=!0)),c?(j=e.top-h,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),d=a.extend({top:j,left:k,width:g},s(this.opts.dropdownCss)),this.dropdown.css(d)},shouldOpen:function(){var b;return this.opened()?!1:(b=a.Event("open"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var b=this.containerId,c=this.containerSelector,d="scroll."+b,e="resize."+b;this.container.parents().each(function(){a(this).bind(d,function(){var b=a(c);0==b.length&&a(this).unbind(d)})}),a(window).bind(e,function(){var b=a(c);0==b.length&&a(window).unbind(e),b.select2("close")}),this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(this.opened()){var b=this;this.container.parents().each(function(){a(this).unbind("scroll."+b.containerId)}),a(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(a.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var b,c,d,e,f,g,h,i=this.results;if(c=this.highlight(),!(0>c)){if(0==c)return i.scrollTop(0),void 0;b=i.find(".select2-result-selectable"),d=a(b[c]),e=d.offset().top+d.outerHeight(),c===b.length-1&&(h=i.find("li.select2-more-results"),h.length>0&&(e=h.offset().top+h.outerHeight())),f=i.offset().top+i.outerHeight(),e>f&&i.scrollTop(i.scrollTop()+(e-f)),g=d.offset().top-i.offset().top,0>g&&i.scrollTop(i.scrollTop()+g)}},moveHighlight:function(b){for(var c=this.results.find(".select2-result-selectable"),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")){this.highlight(d);break}}},highlight:function(b,d){var e=this.results.find(".select2-result-selectable").not(".select2-disabled");return 0===arguments.length?c(e.filter(".select2-highlighted")[0],e.get()):(b>=e.length&&(b=e.length-1),0>b&&(b=0),e.removeClass("select2-highlighted"),""!==d&&a(e[b]).addClass("select2-highlighted"),this.ensureHighlightVisible(),void 0)},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.results.find(".select2-result-selectable");this.highlight(d.index(c))}else 0==c.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var a,b=this.results,c=b.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==c.length&&(a=c.offset().top-b.offset().top-b.height(),0>=a&&(c.addClass("select2-active"),this.opts.query({term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(a){e.opened()&&(e.opts.populateResults.call(this,b,a.results,{term:f,page:d,context:g}),a.more===!0?(c.detach().appendTo(b).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):c.remove(),e.positionDropdown(),e.resultsPage=d)})})))},tokenize:function(){},updateResults:function(c){function e(){j.scrollTop(0),i.removeClass("select2-active"),l.positionDropdown()}function f(a){j.html(l.opts.escapeMarkup(a)),e()}var g,h,i=this.search,j=this.results,k=this.opts,l=this;if(c===!0||this.showSearchInput!==!1&&this.opened()){if(i.addClass("select2-active"),k.maximumSelectionSize>=1&&(g=this.data(),a.isArray(g)&&g.length>=k.maximumSelectionSize&&r(k.formatSelectionTooBig,"formatSelectionTooBig")))return f("<li class='select2-selection-limit'>"+k.formatSelectionTooBig(k.maximumSelectionSize)+"</li>"),void 0;if(i.val().length<k.minimumInputLength&&r(k.formatInputTooShort,"formatInputTooShort"))return f("<li class='select2-no-results'>"+k.formatInputTooShort(i.val(),k.minimumInputLength)+"</li>"),void 0;f("<li class='select2-searching'>"+k.formatSearching()+"</li>"),h=this.tokenize(),h!=b&&null!=h&&i.val(h),this.resultsPage=1,k.query({term:i.val(),page:this.resultsPage,context:null,matcher:k.matcher,callback:this.bind(function(g){var h;if(this.opened()){if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&""!==i.val()&&(h=this.opts.createSearchChoice.call(null,i.val(),g.results),h!==b&&null!==h&&l.id(h)!==b&&null!==l.id(h)&&0===a(g.results).filter(function(){return d(l.id(this),l.id(h))}).length&&g.results.unshift(h)),0===g.results.length&&r(k.formatNoMatches,"formatNoMatches"))return f("<li class='select2-no-results'>"+k.formatNoMatches(i.val())+"</li>"),void 0;j.empty(),l.opts.populateResults.call(this,j,g.results,{term:i.val(),page:this.resultsPage,context:null}),g.more===!0&&r(k.formatLoadMore,"formatLoadMore")&&(j.append("<li class='select2-more-results'>"+l.opts.escapeMarkup(k.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){l.loadMoreIfNeeded()},10)),this.postprocessResults(g,c,i.val()),e()}})})}},cancel:function(){this.close(),this.opts.element.trigger(a.Event("cancel"))},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){this.search.show(),this.search.focus(),window.setTimeout(this.bind(function(){this.search.show(),this.search.focus(),this.search.val(this.search.val())}),10)},selectHighlighted:function(){var a=this.highlight(),b=this.results.find(".select2-highlighted").not(".select2-disabled"),c=b.closest(".select2-result-selectable").data("select2-data");c?(b.addClass("select2-disabled"),this.highlight(a),this.onSelect(c)):(this.close(),this.focusSearch(),this.triggerChange(["emptyTabReturn"]))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function c(){var c,d,e,f,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(e=d[f].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==e&&e.length>=1)return e[1];return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.attr("style","width: "+d)}}),y=v(x,{createContainer:function(){var b=a("<div></div>",{"class":"select2-container"}).html(["    <a class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var a,b=this.container,c=this.dropdown,d=!1;this.selection=a=b.find(".select2-choice"),this.search.bind("keydown",this.bind(function(a){if(this.enabled){if(a.which===w.PAGE_UP||a.which===w.PAGE_DOWN)return l(a),void 0;if(this.opened())switch(a.which){case w.UP:case w.DOWN:return this.moveHighlight(a.which===w.UP?-1:1),l(a),void 0;case w.TAB:return this.exit=a.shiftKey?-1:1,this.selectHighlighted(),l(a),void 0;case w.ENTER:return this.exit=a.shiftKey?-2:2,this.selectHighlighted(),l(a),void 0;case w.ESC:return this.cancel(a),l(a),void 0}else{if(a.which===w.TAB||w.isControl(a)||w.isFunctionKey(a)||a.which===w.ESC)return;if(this.opts.openOnEnter===!1&&a.which===w.ENTER)return;if(this.open(),a.which===w.ENTER)return}}})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),a.bind("mousedown",this.bind(function(){d=!0,this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open(),d=!1})),c.bind("mousedown",this.bind(function(){this.search.focus()})),a.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),a.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),a.bind("keydown",this.bind(function(a){if(this.enabled){if(a.which===w.PAGE_UP||a.which===w.PAGE_DOWN)return l(a),void 0;if(!(a.which===w.TAB||w.isControl(a)||w.isFunctionKey(a)||a.which===w.ESC||this.opts.openOnEnter===!1&&a.which===w.ENTER)){if(a.which==w.DELETE||a.which==w.BACKSPACE)return this.opts.allowClear&&this.clear(),l(a),void 0;if(this.open(),a.which===w.ENTER)return l(a),void 0;if(a.which<48)return l(a),void 0;var b=String.fromCharCode(a.which).toLowerCase();a.shiftKey&&(b=b.toUpperCase()),this.search.focus(),this.search.val(b),l(a)}}})),a.delegate("abbr","mousedown",this.bind(function(a){this.enabled&&(this.clear(),l(a),this.opts.closeOnRemove&&this.close(),this.triggerChange(["singleRemove"]),this.selection.focus())})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val())this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.setPlaceholder())},this.opts.listId)}},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments);return"select"===b.element.get(0).tagName.toLowerCase()&&(b.initSelection=function(b,c){var d=b.find(":selected");a.isFunction(c)&&c({id:d.attr("value"),text:d.text()})}),b},setPlaceholder:function(){var a=this.getPlaceholder();if(""===this.opts.element.val()&&a!==b){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(b,c,e){var f=0,g=this,h=!0;this.results.find(".select2-result-selectable").each2(function(a,b){return d(g.id(b.data("select2-data")),g.opts.element.val())?(f=a,!1):void 0}),this.highlight(f,e),c===!0&&(h=this.showSearchInput=t(b.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[h?"removeClass":"addClass"]("select2-search-hidden"),a(this.dropdown,this.container)[h?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(a){this.opts.element.val(),this.opts.element.val(this.id(a)),this.updateSelection(a),this.close(),this.selection.focus(),this.triggerChange()},updateSelection:function(a){var c,d=this.selection.find("span");this.selection.data("select2-data",a),d.empty(),c=this.opts.formatSelection(a,d),c!==b&&d.append(this.opts.escapeMarkup(c)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.selection.find("abbr").show()},val:function(){var a,c=null,d=this;if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],this.select)this.select.val(a).find(":selected").each2(function(a,b){return c={id:b.attr("value"),text:b.text()},!1}),this.updateSelection(c),this.setPlaceholder();else{if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");if(!a)return this.clear(),void 0;this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(a?d.id(a):""),d.updateSelection(a),d.setPlaceholder()})}},clearSearch:function(){this.search.val("")},data:function(a){var c;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(a&&""!==a?(this.opts.element.val(a?this.id(a):""),this.updateSelection(a)):this.clear(),void 0)}}),z=v(x,{createContainer:function(){var b=a("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments);return"select"===b.element.get(0).tagName.toLowerCase()&&(b.initSelection=function(b,c){var d=[];b.find(":selected").each2(function(a,b){d.push({id:b.attr("value"),text:b.text()})}),a.isFunction(c)&&c(d)}),b},initContainer:function(){var b,c=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=b=this.container.find(c),this.search.bind("keydown",this.bind(function(a){if(this.enabled){if(a.which===w.BACKSPACE&&""===this.search.val()){this.close();var c,d=b.find(".select2-search-choice-focus");if(d.length>0)return this.unselect(d.first()),this.search.width(10),l(a),void 0;c=b.find(".select2-search-choice"),c.length>0&&c.last().addClass("select2-search-choice-focus")}else b.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(a.which){case w.UP:case w.DOWN:return this.moveHighlight(a.which===w.UP?-1:1),l(a),void 0;case w.ENTER:return this.exit=a.shiftKey?-2:2,this.selectHighlighted(),l(a),void 0;case w.TAB:return this.exit=a.shiftKey?-1:1,this.selectHighlighted(),l(a),void 0;case w.ESC:return this.cancel(a),l(a),void 0}a.which===w.TAB||w.isControl(a)||w.isFunctionKey(a)||a.which===w.BACKSPACE||a.which===w.ESC||(this.opts.openOnEnter!==!1||a.which!==w.ENTER)&&(this.open(),(a.which===w.PAGE_UP||a.which===w.PAGE_DOWN)&&l(a))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(a){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.clearSearch(),a.stopImmediatePropagation()})),this.container.delegate(c,"mousedown",this.bind(function(b){this.enabled&&(a(b.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.delegate(c,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var d=[],e=[],f=this;a(b).each(function(){c(f.id(this),d)<0&&(d.push(f.id(this)),e.push(this))}),b=e,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){f.addSelectedChoice(this)}),f.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a){this.addSelectedChoice(a),this.select&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.opts.searchClear&&(this.countSelectableResults()>0?(this.clearSearch(),this.close(),this.open()):(this.clearSearch(),this.open())),this.triggerChange({added:a}),this.focusSearch()},cancel:function(){this.close(),this.focusSearch(),this.opts.element.trigger(a.Event("cancel"))},addSelectedChoice:function(b){var c,d=a("<li class='select2-search-choice'>    <div></div>    <a href='#select2Line2116' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),e=this.id(b),f=this.getVal();c=this.opts.formatSelection(b,d),d.find("div").replaceWith("<div>"+this.opts.escapeMarkup(c)+"</div>"),d.find(".select2-search-choice-close").bind("mousedown",l).bind("click dblclick",this.bind(function(b){this.enabled&&(a(b.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.opts.closeOnRemove?this.close():(this.close(),this.open()),this.focusSearch()})).dequeue(),l(b))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),d.data("select2-data",b),d.insertBefore(this.searchContainer),f.push(e),this.setVal(f)},unselect:function(a){var b,d,e=this.getVal();if(a=a.closest(".select2-search-choice"),0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";b=a.data("select2-data"),d=c(this.id(b),e),d>=0&&(e.splice(d,1),this.setVal(e),this.select&&this.postprocessResults()),a.remove(),this.triggerChange({removed:b})},postprocessResults:function(a,b,d){var e=this.getVal(),f=this.results.find(".select2-result-selectable"),g=this.results.find(".select2-result-with-children"),h=this;f.each2(function(a,b){var d=h.id(b.data("select2-data"));c(d,e)>=0?b.addClass("select2-disabled").removeClass("select2-result-selectable"):b.removeClass("select2-disabled").addClass("select2-result-selectable")}),g.each2(function(a,b){0==b.find(".select2-result-selectable").length?b.addClass("select2-disabled"):b.removeClass("select2-disabled")}),f.each2(function(a,b){return!b.hasClass("select2-disabled")&&b.hasClass("select2-result-selectable")?(h.highlight(0,d),!1):void 0})},resizeSearch:function(){var a,b,c,d,e,g=f(this.search);a=m(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-g,a>e&&(e=c-g),40>e&&(e=c-g),this.search.width(e)},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),e(a,this.opts.separator))},setVal:function(b){var d;this.select?this.select.val(b):(d=[],a(b).each(function(){c(this,d)<0&&d.push(this)}),this.opts.element.val(0===d.length?"":d.join(this.opts.separator)))},val:function(){var c,d=[],e=this;if(0===arguments.length)return this.getVal();if(c=arguments[0],!c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void 0;if(this.setVal(c),this.select)this.select.find(":selected").each(function(){d.push({id:a(this).attr("value"),text:a(this).text()})}),this.updateSelection(d);else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a(b).map(e.id);e.setVal(c),e.updateSelection(b),e.clearSearch()})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b){var c,d=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(b||(b=[]),c=a.map(b,function(a){return d.opts.id(a)}),this.setVal(c),this.updateSelection(b),this.clearSearch(),void 0)}}),a.fn.select2=function(){var d,e,f,g,h=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===h.length||"object"==typeof h[0])d=0===h.length?{}:a.extend({},h[0]),d.element=a(this),"select"===d.element.get(0).tagName.toLowerCase()?g=d.element.attr("multiple"):(g=d.multiple||!1,"tags"in d&&(d.multiple=g=!0)),e=g?new z:new y,e.init(d);else{if("string"!=typeof h[0])throw"Invalid arguments to select2 plugin: "+h;if(c(h[0],i)<0)throw"Unknown method: "+h[0];if(f=b,e=a(this).data("select2"),e===b)return;if(f="container"===h[0]?e.container:e[h[0]].apply(e,h.slice(1)),f!==b)return!1}}),f===b?this:f},a.fn.select2.defaults={width:"copy",closeOnSelect:!0,closeOnRemove:!0,searchClear:!1,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c){var d=[];return n(a.text,c.term,d),d.join("")},formatSelection:function(a){return a?a.text:b},formatResultCssClass:function(){return b},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){return"Please enter "+(b-a.length)+" more characters"},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return b.toUpperCase().indexOf(a.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:u,escapeMarkup:function(a){return a&&"string"==typeof a?a.replace(/&/g,"&amp;"):a},blurOnChange:!1},window.Select2={query:{ajax:o,local:p,tags:q},util:{debounce:i,markMatch:n},"class":{"abstract":x,single:y,multi:z}}}}(jQuery),angular.module("ADE").directive("adeRich",["ADE","$compile","$sanitize",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeClass:"@",adeReadonly:"@",adeMax:"@",adeCut:"@",ngModel:"="},link:function(d,e){var f=Math.floor(1e5*Math.random()),g=!1,h=null,i=0,j=null,k=!1,l="",m=100,n=null,o=null;void 0!==d.adeMax&&(o=n=parseInt(d.adeMax)),void 0!==d.adeClass&&(l=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(k=!0),void 0!==d.adeCut&&(m=parseInt(d.adeCut));var p=function(){var a="",b=d.ngModel,f=m||100;if(void 0!==b){angular.isArray(b)&&(b=b[0]),(null==b||void 0==b)&&(b=""),b.split||(b=b.toString()),n&&b.length>n&&(n=b.length),b=c(b).replace(/<[^>]+>/gm,"");var g=b.split(/\r?\n|\r/);b=g[0],a=f<b.length?b.substring(0,f)+"...":g.length>1?b+"...":b}e.html(a)},q=function(b){var c=d.ngModel;i=b;var j=$("#tinyText"+f+"_ifr").contents().find("#tinymce")[0],k=$(j).text().length;if(3!=b&&(!n||n>=k)&&(n>o&&n>k&&(n=k),void 0!=j)){var l=j.innerHTML;('<p><br data-mce-bogus="1"></p>'===l||"<p></p>"===l||"<p><br></p>"===l)&&(l=""),l=$.trim(l),d.ngModel=l}h.off(),h.remove(),g=!1,a.done(d.adeId,c,d.ngModel,i),1==i?(e.data("dontclick",!0),e.focus()):-1==i&&(e.data("dontclick",!0),e.focus()),$(document).off("mousedown.ADE"),$(document).off("scroll.ADE")},r=function(){a.hidePopup(e);var c=$(window).scrollTop(),f=$(window).scrollLeft(),i=e.offset(),j=i.left-f,l=i.top+e[0].offsetHeight-2-c,m=d.ngModel;d.ngModel&&angular.isString(d.ngModel)&&(m=d.ngModel.replace(/\n/g,"<br />")),m&&(b('<div class="ade-popup ade-rich dropdown-menu open" style="left:'+j+"px;top:"+l+'px"><div class="ade-richview">'+m+"</div></div>")(d).insertAfter(e),$(".ade-richview").find("a").not('[href^="http"],[href^="https"],[href^="mailto:"],[href^="#"]').each(function(){var a=this.getAttribute("href"),b=-1!==a.indexOf("@")?"mailto:":"http://";this.setAttribute("href",b+a)}),g=!1,h=e.next(".ade-rich"),h.on("mouseenter.ADE",w),h.on("mouseleave.ADE",x),k||h.on("click.ADE",y),$(document).on("scroll.ADE",function(){d.$apply(function(){a.hidePopup(e)})}))},s=function(){var a=$("#richText");$(window).scrollTop(),$(window).scrollLeft();var b=a.offset(),c=$(window).height(),d=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,f=a[0].offsetTop+a[0].offsetHeight;f>c&&a.css({top:b.top-a[0].offsetHeight-e.height()-13-d,left:b.left}).addClass("flip")},t=function(a){var b=0===$(".ade-popup").has(a.target).length,c="block"===$(".mce-floatpanel").css("display");if(!c&&b){for(var d=a.target,e=!1;d;){if(0===d.id.search("mce_")){e=!0;break}d=d.parentElement}e||(x(),q(0),$(document).off("mousedown.ADE"))}},u=function(a){var b=[27,9,8,46,37,38,39,40];if(n&&-1==b.indexOf(a.keyCode)){var c=$("#tinyText"+f+"_ifr").contents().find("#tinymce")[0],e=$(c).find("p")[0].innerHTML,g=$(c).text().length;g>=n&&($(c).find("p")[0].innerHTML=e,a.stopPropagation(),a.preventDefault())}switch(a.keyCode){case 27:d.$apply(function(){x(),q(3)}),a.preventDefault(),$(document).off("mousedown.ADE");break;case 9:var h=a.shiftKey?-1:1;d.$apply(function(){x(),q(h)}),a.preventDefault(),$(document).off("mousedown.ADE")}},v=function(){window.clearTimeout(j),h&&h.off(".ADE"),a.hidePopup(e);var c="";d.ngModel&&(c=d.ngModel);var i='<textarea id="tinyText'+f+'" class="'+l+'" style="height:30px">'+c+"</textarea>",k=$(window).scrollTop(),m=$(window).scrollLeft(),n=e.offset(),o=n.left-m,p=n.top+e[0].offsetHeight-2-k,r='<div id="richText" class="ade-popup ade-rich dropdown-menu open" style="left:'+o+"px;top:"+p+'px">'+i+"</div>";b(r)(d).insertAfter(e),tinymce.init({selector:"#tinyText"+f,theme:"modern",menubar:"false",plugins:["textcolor","link"],toolbar:"styleselect | bold italic | bullist numlist outdent indent | hr | link | forecolor backcolor",baseURL:"",handleKeyEvents:u}),g=!0,h=e.next(".ade-rich"),$(document).on("mousedown.ADE",function(a){d.$apply(function(){t(a)})}),$(document).on("scroll.ADE",function(){d.$apply(function(){q(3)})}),j=window.setTimeout(function(){tinymce.execCommand("mceFocus",!1,"tinyText"+f)},100)},w=function(){if(window.clearTimeout(j),!angular.element(".ade-rich").hasClass("open")||!angular.element(".ade-rich").find("textarea").length){var a=e.next(".ade-rich");a.length||r()}},x=function(){var b=e.next(".ade-popup");b.length&&!g&&(j=window.setTimeout(function(){a.hidePopup(e)},400))},y=function(){window.clearTimeout(j),g||(g=!0,i=0,a.begin(d.adeId),v(),setTimeout(s))};e.on("mouseenter.ADE",w),e.on("mouseleave.ADE",x),k||(e.on("click.ADE",y),e.on("keydown.ADE",function(a){13===a.keyCode&&y()})),d.$on("$destroy",function(){e&&e.off(),h&&h.off(),$(document).off("mousedown.ADE"),$(document).off("scroll.ADE")}),d.$watch(function(a){return a.ngModel},function(){p()})}}}]),angular.module("ADE").filter("money",["$filter",function(a){return function(b){var c,d="";return angular.isUndefined(b)?d:(angular.isArray(b)&&(b=b[0]),angular.isString(b)&&(b=b.replace("(","-").replace(")",""),b=parseFloat(b.replace(/[$]/g,""))),angular.isNumber(b)&&(c=parseFloat(b),d=0!==c?a("currency")(c):d),d)}}]),angular.module("ADE").filter("percent",function(){return function(a){angular.isArray(a)&&(a=a[0]);var b=parseFloat(a),c="";return isNaN(b)||(c=b+"%"),c}}),angular.module("ADE").filter("phone",function(){return function(a){if(!a)return"";angular.isArray(a)&&(a=a[0]),angular.isString(a)||(a=a.toString());var b=a.replace(/[\-\.() ]/g,""),c=!isNaN(parseInt(b))&&b.length>=7?'<a href="tel:'+b+'">'+a+"</a>":a;return c}}),angular.module("ADE").directive("adeRating",["ADE","$compile","$filter",function(a){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeNum:"@",adeArrows:"@",adeClass:"@",adeWidth:"@",adeReadonly:"@",ngModel:"="},link:function(b,c){var d=5,e=23,f="icon-star",g=!1;void 0!==b.adeNum&&(d=parseInt(b.adeNum)),void 0!==b.adeWidth&&(e=parseInt(b.adeWidth)),void 0!==b.adeClass&&(f=b.adeClass),void 0!==b.adeReadonly&&"1"==b.adeReadonly&&(g=!0);var h=e*d+10,i=function(){var a="-empty",e=g?"":" ade-editable",i='<div class="ade-rating'+e+'" style="width:'+h+'px;">';i+='<div class="ade-rate-container">';for(var j=parseInt(b.ngModel),k=0;d>=k;k++)a=j>=k?"":"-empty",i+=0===k?'<a class="ade-rate-one ade-zero" data-position="'+k+'">&nbsp;</a>':'<a class="ade-rate-one '+f+a+" ade-rate"+a+'" data-position="'+k+'"></a>';i+="</div></div>",c.html(i)},j=function(c){a.begin(b.adeId),c>d&&(c=d),0>c&&(c=0);var e=b.ngModel;b.ngModel=c,i(),a.done(b.adeId,e,b.ngModel,0)},k=function(a){var b=angular.element(a.target).data("position");void 0!==b&&j(b)},l=function(){c.on("keydown.ADE",function(a){a.keyCode>=96&&a.keyCode<=105?(a.preventDefault(),a.stopPropagation(),j(a.keyCode-96)):a.keyCode>=48&&a.keyCode<=57?(a.preventDefault(),a.stopPropagation(),j(a.keyCode-48)):37==a.keyCode&&b.adeArrows?(a.preventDefault(),a.stopPropagation(),j(b.ngModel-1)):39==a.keyCode&&b.adeArrows&&(a.preventDefault(),a.stopPropagation(),angular.isNumber(b.ngModel)||(b.ngModel=0),j(b.ngModel+1))}),c.on("blur.ADE",function(){c.off("keydown.ADE")})};g||(c.on("click.ADE",function(a){b.$apply(function(){k(a)})}),c.on("focus.ADE",function(a){b.$apply(function(){l(a)})})),b.$on("$destroy",function(){c&&c.off()}),b.$watch(function(a){return a.ngModel},function(){i()})}}}]),angular.module("ADE").directive("adeText",["ADE","$compile","$sanitize",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeClass:"@",adeReadonly:"@",adeMax:"@",ngModel:"="},link:function(d,e){var f=!1,g=null,h=0,i=0,j=!1,k="";void 0!==d.adeClass&&(k=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(j=!0),void 0!==d.adeMax&&(i=parseInt(d.adeMax));var l=function(){var a="",b=d.ngModel;void 0!==b&&(angular.isArray(b)&&(b=b[0]),b.split||(b=b.toString()),b=c(b).replace(/<[^>]+>/gm,""),a=b),e.html(a)},m=function(b){var c=d.ngModel;h=b,3!=b&&(d.ngModel=g.val()),e.show(),g.remove(),f=!1,a.done(d.adeId,c,d.ngModel,h),a.teardownBlur(g),a.teardownKeys(g)},n=function(){if(!f){f=!0,h=0,a.begin(d.adeId);var c="";void 0===i||0==i||isNaN(i)||(c="maxlength='"+i+"'");var j=d.ngModel;(void 0==j||null==j)&&(j=""),angular.isString(j)||(j=j.toString()),e.hide(),b('<input type="text" class="'+k+'" value="'+j.replace(/"/g,"&quot;")+'" '+c+" />")(d).insertAfter(e),g=e.next("input"),g.focus(),a.setupBlur(g,m,d),a.setupKeys(g,m,!1,d)}};j||e.on("click.ADE",function(a){d.$apply(function(){n(a)})}),d.$on("$destroy",function(){e&&e.off("click.ADE")}),d.$watch(function(a){return a.ngModel},function(){l()})}}}]),angular.module("ADE").directive("adeTimepop",["$filter",function(a){return{require:"?ngModel",restrict:"A",scope:{adeTimepop:"@",ngModel:"="},link:function(b,c){var d=!1,e="12";void 0!==b.adeTimepop&&(e=b.adeTimepop);var f=function(){d||(b.ngModel=a("time")(b.ngModel,e))},g=function(){var a=c.context.value,b=c.timepicker().data().timepicker;if(angular.isString(a)){var d=a.split(" "),e=d[0].split(":"),f=parseInt(e[0],10),g=parseInt(e[1],10),h=d[1],i=23>=f?f:23,j=59>=g?g:59;b.hour=i,b.minute=j,b.meridian=h}c.timepicker("updateWidget")},h=function(a){var b=i(a);return d=!1,b&&13!=a.keyCode&&27!=a.keyCode&&9!=a.keyCode&&8!=a.keyCode&&setTimeout(function(){g()},100),!0},i=function(a){for(var b=[49,50,51,52,53,54,55,56,57,109,112,97,48,58,8,186,13,27,32],d=!1,e=0;e<b.length;e++)if(!d){if(a.keyCode===b[e])return d=!0,c.length<8?d:!1;d=!1}return d};c.on("keydown.ADE",function(a){d=!0,13==a.keyCode?(c.timepicker("updateWidget"),c.timepicker("hideWidget"),c.blur()):27==a.keyCode?c.timepicker("hideWidget",!1):9==a.keyCode&&(c.timepicker("updateWidget"),c.timepicker("hideWidget",!0))}),c.on("keyup.ADE",h),c.timepicker({showMeridian:"24"==e?!1:!0}),b.$on("$destroy",function(){c&&(c.off("keydown.ADE"),c.off("keyup.ADE"))}),b.$watch(function(a){return a.ngModel},function(){f({time:b.ngModel})})}}}]),angular.module("ADE").directive("adeTime",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeTime:"@",adeId:"@",adeClass:"@",adeReadonly:"@",ngModel:"="},link:function(d,e){var f=!1,g=null,h=0,i=!1,j="",k="12",l="";void 0!==d.adeTime&&(k=d.adeTime),void 0!==d.adeClass&&(j=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(i=!0);var m=function(){l=void 0==d.ngModel?"":c("time")(d.ngModel,k),e.html(l)},n=function(b){var c=g.val(),i=d.ngModel;if(h=b,3!=b){var j=c.split(" "),k=j[0].split(":"),l=parseInt(k[0],10),m=parseInt(k[1],10),n=j[1]||"",o=23>=l?l:23,p=59>=m?m:59;10>p&&(p="0"+p);var q=o+":"+p+" "+n;value=k.length>1?Date.parse(q).getTime()/1e3:"",d.ngModel=value}e.show(),a.teardownBlur(g),a.teardownKeys(g),g.timepicker("removeWidget"),g.scope()&&g.scope().$destroy(),g.remove(),f=!1,a.done(d.adeId,i,d.ngModel,h)},o=function(){if(a.hidePopup(),!f){f=!0,h=0;var c=d.ngModel||0,i=8;"24"===k&&(i=5),a.begin(d.adeId),e.hide();var l='<input ng-controller="adeTimeDummyCtrl" ade-timepop="'+k+'" ng-model="adePickTime" ng-init="adePickTime='+c+'" maxlength="'+i+'" type="text" class="'+j+'" />';b(l)(d).insertAfter(e),g=e.next("input"),g.focus(),setTimeout(function(){g.focus()}),a.setupBlur(g,n,d),a.setupKeys(g,n,!1,d)}};i||e.on("click.ADE",o),d.$on("$destroy",function(){e&&e.off("click.ADE")}),d.$watch(function(a){return a.ngModel},function(){m()})}}}]),angular.module("ADE").filter("time",function(){return function(a,b){var c,d,e,f,g="",b=b||"12";if(angular.isUndefined(a))return g;if(angular.isArray(a)&&(a=a[0]),0==a)return g;if(angular.isNumber(a)&&(c=new Date(1e3*a)),angular.isString(a)){var h=a.split(" ");if(-1==h[0].indexOf(":"))return g;var i=h[0].split(":"),e=parseInt(i[0],10),j=parseInt(i[1],10),d=h[1]||"",k=23>=e?e:23,l=59>=j?j:59;10>l&&(l="0"+l);var m=k+":"+l+" "+d;return m}return angular.isDate(c)?(e=c.getHours(),f=c.getMinutes(),"12"===b?(d=e>=12?"pm":"am",e%=12,e=e?e:12,f=10>f?"0"+f:f,g=e+":"+f+" "+d):(f=10>f?"0"+f:f,g=e+":"+f),g):g}}),!function(a){var b=function(b,c){this.$element=a(b),this.isInput=this.$element.is("input"),this.options=a.extend({},a.fn.timepicker.defaults,c,this.$element.data()),this.minuteStep=this.options.minuteStep||this.minuteStep,this.secondStep=this.options.secondStep||this.secondStep,this.showMeridian=this.options.showMeridian||this.showMeridian,this.showSeconds=this.options.showSeconds||this.showSeconds,this.showInputs=this.options.showInputs||this.showInputs,this.disableFocus=this.options.disableFocus||this.disableFocus,this.template=this.options.template||this.template,this.modalBackdrop=this.options.modalBackdrop||this.modalBackdrop,this.defaultTime=this.options.defaultTime||this.defaultTime,this.open=!1,this.init()};b.prototype={constructor:b,init:function(){this.$element.parent().hasClass("input-append")?(this.$element.parent(".input-append").find(".add-on").on("click",a.proxy(this.showWidget,this)),this.$element.on({focus:a.proxy(this.highlightUnit,this),click:a.proxy(this.highlightUnit,this),keypress:a.proxy(this.elementKeypress,this),blur:a.proxy(this.blurElement,this)})):this.template?this.$element.on({focus:a.proxy(this.showWidget,this),click:a.proxy(this.showWidget,this),blur:a.proxy(this.blurElement,this)}):this.$element.on({focus:a.proxy(this.highlightUnit,this),click:a.proxy(this.highlightUnit,this),keypress:a.proxy(this.elementKeypress,this),blur:a.proxy(this.blurElement,this)}),this.$widget=a(this.getTemplate()).appendTo("body"),this.$widget.on({click:a.proxy(this.widgetClick,this),mousedown:a.proxy(this.mousedown,this)}),this.showInputs&&(this.picker=this.$widget.find("input").on({click:function(){this.select()},keypress:a.proxy(this.widgetKeypress,this),change:a.proxy(this.updateFromWidgetInputs,this)})),this.setDefaultTime(this.defaultTime)},showWidget:function(b){if(b.stopPropagation(),b.preventDefault(),!this.open){this.isInput||a(document).on("mousedown",a.proxy(this.hide,this)),this.$element.trigger("show"),this.disableFocus&&this.$element.blur();var c=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.updateFromElementVal(),a("html").trigger("click.timepicker.data-api").one("click.timepicker.data-api",a.proxy(this.hideWidget,this)),"modal"===this.template?this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this)):(this.$widget.css({top:c.top+c.height,left:c.left}),this.open||this.$widget.addClass("open")),this.open=!0,this.$element.trigger("shown")}},hideWidget:function(a){var b=Date.parse(this.$element.val());this.time=null!==b?b.getTime()/1e3:"",this.save=a?!0:!1,this.$element.trigger({type:"hide",time:this.time,shouldSave:this.save}),"modal"===this.template?this.$widget.modal("hide"):this.$widget.removeClass("open"),this.open=!1,this.$element.trigger("hidden")},mousedown:function(a){a.stopPropagation(),a.preventDefault()},removeWidget:function(){this.$widget.remove()},widgetClick:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target).closest("a").data("action");c&&(this[c](),this.update())},widgetKeypress:function(b){var c=a(b.target).closest("input").attr("name");switch(b.keyCode){case 9:this.showMeridian?"meridian"==c&&this.hideWidget():this.showSeconds?"second"==c&&this.hideWidget():"minute"==c&&this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(c){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 40:switch(c){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 13:this.updateElement(),this.hideWidget()}},elementKeypress:function(a){switch(this.$element.get(0),a.keyCode){case 0:break;case 9:this.updateFromElementVal(),this.showMeridian?"meridian"!=this.highlightedUnit&&(a.preventDefault(),this.highlightNextUnit()):this.showSeconds?"second"!=this.highlightedUnit&&(a.preventDefault(),this.highlightNextUnit()):"minute"!=this.highlightedUnit&&(a.preventDefault(),this.highlightNextUnit());break;case 27:this.updateFromElementVal();break;case 37:this.updateFromElementVal(),this.highlightPrevUnit();break;case 38:switch(this.highlightedUnit){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement();break;case 39:this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(this.highlightedUnit){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement()}0!==a.keyCode&&8!==a.keyCode&&9!==a.keyCode&&46!==a.keyCode&&a.preventDefault()},setValues:function(a){if(this.showMeridian){var b=a.split(" "),c=b[0].split(":");this.meridian=b[1]}else var c=a.split(":");this.hour=parseInt(c[0],10),this.minute=parseInt(c[1],10),this.second=parseInt(c[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=1),"AM"==this.meridian||"A"==this.meridian?this.meridian="am":("PM"==this.meridian||"P"==this.meridian)&&(this.meridian="pm"),"am"!=this.meridian&&"pm"!=this.meridian&&(this.meridian="am")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),""!=this.$element.val()&&this.updateElement(),this.updateWidget()},setMeridian:function(a){"a"==a||"am"==a||"AM"==a?this.meridian="AM":"p"==a||"pm"==a||"PM"==a?this.meridian="PM":this.updateWidget(),this.updateElement()},setDefaultTime:function(a){if(a){if("current"===a){var b=new Date,c=b.getHours(),d=Math.floor(b.getMinutes()/this.minuteStep)*this.minuteStep,e=Math.floor(b.getSeconds()/this.secondStep)*this.secondStep,f="am";this.showMeridian&&(0===c?c=12:c>=12?(c>12&&(c-=12),f="pm"):f="am"),this.hour=c,this.minute=d,this.second=e,this.meridian=f}else"value"===a?this.setValues(this.$element.val()):this.setValues(a);""!=this.$element.val()&&this.updateElement(),this.updateWidget()}else this.hour=0,this.minute=0,this.second=0},formatTime:function(a,b,c,d){return a=a,b=10>b?"0"+b:b,c=10>c?"0"+c:c,a+":"+b+(this.showSeconds?":"+c:"")+(this.showMeridian?" "+d:"")},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},setTime:function(a){this.setValues(a),this.update()},update:function(){this.updateElement(),this.updateWidget()},blurElement:function(){this.highlightedUnit=void 0,this.updateFromElementVal()},updateElement:function(){var a=this.getTime();switch(this.$element.val(a).change(),this.highlightedUnit){case"hour":this.highlightHour();break;case"minute":this.highlightMinute();break;case"second":this.highlightSecond();break;case"meridian":this.highlightMeridian()}},updateWidget:function(){this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(this.hour),this.$widget.find("input.bootstrap-timepicker-minute").val(this.minute<10?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(this.second<10?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(this.hour),this.$widget.find("span.bootstrap-timepicker-minute").text(this.minute<10?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(this.second<10?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))},updateFromElementVal:function(){var a=this.$element.val();a&&(this.setValues(a),this.updateWidget())},updateFromWidgetInputs:function(){var b=a("input.bootstrap-timepicker-hour",this.$widget).val()+":"+a("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+a("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+a("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setValues(b)},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange(),c=document.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-c}},highlightUnit:function(){this.$element.get(0),this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.highlightMeridian();break;case"second":this.highlightMeridian();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){this.highlightedUnit="hour",this.$element.get(0).setSelectionRange(0,2)},highlightMinute:function(){this.highlightedUnit="minute",this.$element.get(0).setSelectionRange(3,5)},highlightSecond:function(){this.highlightedUnit="second",this.$element.get(0).setSelectionRange(6,8)},highlightMeridian:function(){this.highlightedUnit="meridian",this.showSeconds?this.$element.get(0).setSelectionRange(9,11):this.$element.get(0).setSelectionRange(6,8)},incrementHour:function(){if(this.showMeridian)if(11===this.hour)this.toggleMeridian();else if(12===this.hour)return this.hour=1;return 23===this.hour?this.hour=0:(this.hour=this.hour+1,void 0)},decrementHour:function(){if(this.showMeridian){if(1===this.hour)return this.hour=12;12===this.hour&&this.toggleMeridian()}return 0===this.hour?this.hour=23:(this.hour=this.hour-1,void 0)},incrementMinute:function(){var a=this.minute+this.minuteStep-this.minute%this.minuteStep;a>59?(this.incrementHour(),this.minute=a-60):this.minute=a},decrementMinute:function(){var a=this.minute-this.minuteStep;0>a?(this.decrementHour(),this.minute=a+60):this.minute=a},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;a>59?(this.incrementMinute(),this.second=a-60):this.second=a},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(),this.second=a+60):this.second=a},toggleMeridian:function(){this.meridian="am"===this.meridian?"pm":"am",this.update()},getTemplate:function(){if(this.options.templates[this.options.template])return this.options.templates[this.options.template];if(this.showInputs)var a='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',b='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',c='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',d='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>';else var a='<span class="bootstrap-timepicker-hour"></span>',b='<span class="bootstrap-timepicker-minute"></span>',c='<span class="bootstrap-timepicker-second"></span>',d='<span class="bootstrap-timepicker-meridian"></span>';var e,f='<table class="'+(this.showSeconds?"show-seconds":"")+" "+(this.showMeridian?"show-meridian":"")+'">'+"<tr>"+'<td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator"> </td>'+'<td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator"> </td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator"> </td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr>"+"<tr>"+"<td>"+a+"</td> "+'<td class="separator">:</td>'+"<td>"+b+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+c+"</td>":"")+(this.showMeridian?'<td class="separator"> </td><td>'+d+"</td>":"")+"</tr>"+"<tr>"+'<td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator"> </td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator"> </td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr>"+"</table>";switch(this.options.template){case"modal":e='<div class="bootstrap-timepicker modal hide fade in" style="top: 30%; margin-top: 0; width: 200px; margin-left: -100px;" data-backdrop="'+(this.modalBackdrop?"true":"false")+'">'+'<div class="modal-header">'+'<a href="#" class="close" data-dismiss="modal">×</a>'+"<h3>Pick a Time</h3>"+"</div>"+'<div class="modal-content">'+f+"</div>"+'<div class="modal-footer">'+'<a href="#" class="btn btn-primary" data-dismiss="modal">Ok</a>'+"</div>"+"</div>";break;case"dropdown":e='<div class="bootstrap-timepicker dropdown-menu">'+f+"</div>"}return e}},a.fn.timepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("timepicker"),g="object"==typeof c&&c;f||e.data("timepicker",f=new b(this,g)),"string"==typeof c&&f[c](d)})},a.fn.timepicker.defaults={minuteStep:15,secondStep:15,disableFocus:!1,defaultTime:"current",showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",modalBackdrop:!1,templates:{}},a.fn.timepicker.Constructor=b}(window.jQuery),angular.module("ADE").directive("adeToggle",["ADE","$compile","$filter",function(a){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeClass:"@",adeReadonly:"@",ngModel:"="},link:function(b,c){var d="icon-star",e=!1;void 0!==b.adeClass&&(d=b.adeClass),void 0!==b.adeReadonly&&"1"==b.adeReadonly&&(e=!0);var f=function(){var a=b.ngModel;angular.isArray(a)&&(a=a[0]),angular.isString(a)&&(a=a.toLowerCase(),("false"==a||"no"==a||"0"==a||"o"==a)&&(a=!1));var f=e?"":" ade-editable",g=a?"":"-empty";c.html('<span class="ade-toggle '+f+" "+d+g+'">')},g=function(c){c.preventDefault(),c.stopPropagation(),a.begin(b.adeId);var d=b.ngModel;b.ngModel=b.ngModel?!1:!0,a.done(b.adeId,d,b.ngModel,0)},h=function(){c.on("keypress.ADE",function(a){13==a.keyCode&&(a.preventDefault(),a.stopPropagation(),c.click())})};e||(c.on("click.ADE",function(a){b.$apply(function(){g(a)})}),c.on("focus.ADE",function(a){b.$apply(function(){h(a)})}),c.on("blur.ADE",function(){c.off("keypress.ADE")})),b.$on("$destroy",function(){c&&(c.off("click.ADE"),c.off("focus.ADE"),c.off("blur.ADE"),c.off("keypress.ADE"))}),b.$watch(function(a){return a.ngModel},function(){f()})}}}]),angular.module("ADE").filter("url",["$filter",function(a){return function(b){var c="",d="";return b?(angular.isArray(b)&&(b=b[0]),angular.isString(b)||(b=b.toString()),b=$.trim(b),d=a("linky")(b),d==b&&(b.indexOf(".")>=0&&0!=b.indexOf("http")?(c="http://"+b,d='<a href="'+c+'">'+c+"</a>"):d=b),d):""}}]);